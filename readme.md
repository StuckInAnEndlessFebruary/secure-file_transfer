# 🔐 Secure File Transfer System

## ویژگی‌های اصلی

- ارتباط امن بین کلاینت و سرور (Data Encryption In Transit)
- ذخیره‌سازی امن فایل‌ها در سرور (Data Encryption At Rest)
- امضای دیجیتال فایل‌ها برای تأیید صحت (Integrity via Digital Signatures)
- کنترل دسترسی بر اساس نقش کاربران (Role-Based Access Control)
- ثبت لاگ عملیات حساس
- محدودسازی تلاش‌های ناموفق ورود برای جلوگیری از حمله Brute Force

## ساختار فایل‌ها

```plaintext
.
├── client.py           # کلاینت برای تعامل با سرور
├── server.py           # سرور فایل مرکزی
├── initialize.py       # راه‌اندازی اولیه دیتابیس، کلیدها، کاربران
├── server_data.db      # دیتابیس SQLite برای کاربران و فایل‌ها
├── client_keys/        # کلیدهای خصوصی کاربران
├── server_files/       # فایل‌های رمزنگاری‌شده
├── server_logs.txt     # لاگ عملیات مهم با تایم‌استمپ
└── README.md           # این فایل
```

## پیش‌نیازها

- Python 3.8 یا بالاتر
- پکیج‌های مورد نیاز:

```bash
pip install cryptography
```

## راه‌اندازی و اجرا

### 1. آماده‌سازی اولیه (فقط یک بار)

```bash
python initialize.py
```

### 2. اجرای سرور

```bash
python server.py
```

### 3. اجرای کلاینت

```bash
python client.py
```

در کلاینت می‌تونی:

- با کاربران اولیه وارد شوی (`admin`, `maintainer`, `guest1` و...)
- یا با انتخاب گزینه "Sign Up" یک حساب جدید بسازی.

## امنیت

### 🔐 الگوریتم‌های رمزنگاری استفاده‌شده

| الگوریتم              | کاربرد                                                                                         | دلیل انتخاب و توضیحات کامل                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------------------- | ---------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **RSA** (2048-bit)    | تبادل کلید متقارن بین کلاینت و سرور<br> امضای دیجیتال فایل‌ها                                  | RSA یکی از الگوریتم‌های رمزنگاری نامتقارن استاندارد و پرکاربرد است. به دلیل داشتن کلید عمومی و خصوصی، مناسب برای تبادل امن کلیدهای متقارن است. در این پروژه از RSA برای دو کار استفاده شده:<br>۱) رمز کردن کلید متقارن جدیدی که در ابتدای هر نشست (session) از طرف سرور تولید می‌شود و به‌صورت امن به کلاینت ارسال می‌شود.<br>۲) امضای دیجیتال فایل‌ها توسط کلید خصوصی کاربر، تا گیرنده بتواند صحت فایل را با کلید عمومی ارسال‌شده بررسی کند. |
| **AES-GCM (256-bit)** | رمزنگاری داده‌ها در حین انتقال (in transit)<br> رمزنگاری داده‌ها هنگام ذخیره در سرور (at rest) | AES یکی از سریع‌ترین و امن‌ترین الگوریتم‌های رمزنگاری متقارن است. حالت GCM (Galois/Counter Mode) آن نه تنها رمزنگاری انجام می‌دهد بلکه پیام را نیز در برابر تغییرات محافظت می‌کند. یعنی اگر در حین انتقال یا ذخیره‌سازی، داده‌ها دستکاری شوند، توسط GCM قابل تشخیص است. استفاده از AES-GCM باعث می‌شود علاوه بر حفظ محرمانگی داده، صحت آن نیز تضمین شود.                                                                                      |
| **SHA-256**           | هش کردن پسورد کاربران برای ذخیره امن در پایگاه داده                                            | SHA-256 یک تابع هش امن از خانواده SHA-2 است که در بسیاری از سیستم‌های امنیتی استفاده می‌شود. در این پروژه، پسوردها به صورت هش شده در دیتابیس ذخیره می‌شوند تا در صورت افشای پایگاه داده، پسوردهای واقعی کاربران قابل بازیابی نباشند. SHA-256 در برابر حملات collision و pre-image مقاوم است و از آنجایی که معکوس‌پذیر نیست، برای ذخیره امن رمز عبور مناسب است.                                                                                |
|  |

### کنترل دسترسی:

| نقش کاربر    | دسترسی‌ها                             |
| ------------ | ------------------------------------- |
| `admin`      | مدیریت کاربران، آپلود/دانلود/حذف فایل |
| `maintainer` | آپلود فایل، مدیریت فایل خود، دانلود   |
| `guest`      | فقط دانلود فایل‌ها                    |

### اقدامات امنیتی اضافی:

- ثبت لاگ عملیات‌های حساس (ورود، حذف فایل، تغییر نقش و...)
- محدود کردن تعداد تلاش ورود ناموفق برای جلوگیری از حملات brute-force
